## 1.1 Explain the importance of system and network architecture concepts in security operations 
---
### 1.1.1
**Log Ingestion**: Collecting Log data from multiple sources and storing in a centralized database. 
	-Think about all the log data from various servers to a centralized SIEM 
- **Time Sync** - making sure all the computer systems and logs have synced up time, synced up with NTP, an atomic clock, or GPS system
- **Logging Levels** - Categorize different logging events

| Level      | Description                           |
| ---------- | ------------------------------------- |
| 1 DEBUG    | Used for debugging purposes.          |
| 2 INFO     | Used for informative messages.        |
| 3 WARNING  | Used to indicate a potential problem. |
| 4 ERROR    | Used to indicate a serious problem.   |
| 5 CRITICAL | Used to indicate a critical problem.  |
Syslog uses eight logging levels, starting from the most severe (level 0) to the least severe (level 7).

| Level                  | Description                       |
| ---------------------- | --------------------------------- |
| 0 Emergency (emerg)    | System is unusable                |
| 1 Alert (alert)        | Immediate action required         |
| 2 Critical (crit)      | Critical conditions               |
| 3 Error (error)        | Error conditions                  |
| 4 Warning (warn)       | Warning conditions                |
| 5 Notice (notice)      | Normal but significant conditions |
| 6 Informational (info) | Informational messages            |
| 7 Debug (debug)        | Messages helpful for debugging    |
### 1.1.2
**OS Concepts**:
#### LAB: Managing Windows and Linux services
**Windows Registry** - The database for storing operating system, device, and software application configuration information
is comprised of a set of five root keys that contain computer and user databases
- The HKEY_LOCAL_MACHINE (HKLM) database governs system-wide settings.
- The HKEY_USERS (HKU) database includes settings that apply to individual user profiles, such as desktop personalization.
- HKEY_CURRENT_USER (HKCU) is a subset of HKEY_USERS with the settings for a logged-in user.
- HKEY_CLASSES_ROOT (HKCR): Stores information about file associations and object classes. Tells Windows which application to use when opening a specific file type.
- HKEY_CURRENT_CONFIG (HKCC): information about the current hardware configuration of the system
The Registry database is stored in binary files called hives. A hive comprises of:
- A single file (with no extension)
- A .LOG file (containing a transaction log)
- A .SAV file (a copy of the key as it was at the end of setup)
- An .ALT backup file
Windows Registry Files stored in C:\Windows\System32\Config:

| **File Name**                     | **Subkey in Registry**        | **What It Contains**                                                                                                                                |
| --------------------------------- | ----------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| `SAM (Security Accounts Manager)` | `HKEY_LOCAL_MACHINE\SAM`      | **Security Accounts Manager**: Contains user account data such as usernames, password hashes (encrypted), and group memberships for local accounts. |
| `SECURITY`                        | `HKEY_LOCAL_MACHINE\SECURITY` | Holds information related to local security policies and domain settings, like SID info, policies, and account rights.                              |
| `SOFTWARE`                        | `HKEY_LOCAL_MACHINE\SOFTWARE` | Configurations for Windows OS, installed apps, and system-wide software settings.                                                                   |
| `SYSTEM`                          | `HKEY_LOCAL_MACHINE\SYSTEM`   | Info on boot configuration, drivers, services, control sets — vital for startup.                                                                    |
| `DEFAULT`                         | `HKEY_USERS\.DEFAULT`         | Settings for the **LocalSystem** user, mainly the login screen and system services profile.                                                         |

> [!NOTE] Think in Cysa:
> Investigators  analyze these hives to see what users/accounts exist (SAM), what software was installed (SOFTWARE), what services/drivers were configured (SYSTEM).
> Attackers modify these registry areas to establish persistence
> Password Hashes: Mimikatz or pwdump extract hashes from the SAM file. Can Crack password hashes
> SECURITY -> local/domain security policies enforcement.

**System Hardening**: Reducing Attack surface of a System. Restricting access to protected OS files, Windows Registry, config files, and logs. (Other normal hardening techniques)
Best-practice hardening configurations : DoD STIGs & CIS Benchmarks
**File structure & Configuration file locations**: Linux's "Registry": Config settings are stored in text files in the file system. Located in subdirs of /etc, can be in /usr, /opt, /var
Some Config Files: INI (Key=Value), XML, YAML & JSON files (all key value pairs) for configs 
**System Processes**: are background tasks that run on a computer without user interaction
Manages system resources: memory, network connections, and hardware devices. Launch applications and Perform other tasks. 
	Think of windows services, task manager & Linux `top`, `ps aux`, all processes/daemons w/ PIDs
**Hardware Architecture**: OSes and apps are designed to run on a specific hardware architecture. ARM and x86 arch
x86: usually desktops, laptops, and server computers
ARM: usually in smartphones, tablets, and single-board computers like Raspberry Pi
### 1.1.3 
**Infrastructure concepts**: 
**Serverless**- eliminate the need to manage physical or virtual server instances. Depends oon event-driven orchestration; multiple services doing their job properly w/out intervention. 
Service models: IaaS (WAN), PaaS (computing enviroment), SaaS (applications),FaaS (code functions), SECaaS (Security), IaC (Infrastructure as Code )
Risks: service provider disaster recovery, more services = bigger attack surface, Misconfigs across multiple apps. 
**Virtualization**- tech that creates a software-based representation of a certain component. Apps, NICs, hardware -> software rep.
Hypervisors- software abstraction of a physical system. Hypervisors allow multiple VMs and no in-person maintenance,  can add memory or cpus w/out downtime, automate multiple vms
Type 1 - used to run virtualized servers that support an organization; enterprise setting
Type 2 - Basically Virtualbox, runs on a dedicated OS. Use to build labs for testing, etc. 
Virtual Network - network of VMs. use Virtual desktop infrastructure (VDI) or containers for this. 
Virtual Security need security on the VM, Hypervisor, and Host level. Harden security, security procedures, and segment Virtual networks properly. Virtual networking - vSwitch, vRouter, Virtual firewall appliance (VFA)
**Containerization**:
![[containersvsVM.png]]
### 1.1.4
**Network architecture**:
**On-premises**- on prem infrastructure 
**Cloud**- Think of cloud services characteristics, provisioning resources, dynamically obtain services, provided over network. 
Deployment Models-  Public Cloud (google drive, gmail), Private Clouds (single org, usually hosted internally), Community cloud (shared by several orgs), 
**Hybrid**- combination of public, private, and community. multiple cloud resources from different service providers. 
**Network segmentation**- Network -> subnetworks for better security and performance
Physical segmentation- involves separating different network zones using separate switches, routers, and cabling. Think air gaps
Virtual segmentation- using virtual networks to use software to make traffic be segmented and isolated. Usually with cloud envs. 
Logical segmentation involves using software to create logical divisions within a single network using virtual LANs, or VLANs
**Zero trust**- all network access be continuously verified and authorized throughout the network. 
Data Engine, Administrator, Policy Enforcement Points. Each in different Network Zones enforcing policies
Deperimeterization of networks- Cloud, Remote work, Mobile devices, Outsourcing, Certain WiFi
^zero trust works in Parameterized networks the best. 
**Secure access secure edge (SASE)**- Provides network security functions with WAN; Usually works with the cloud.  Some functionality: IAM w/ SSO or other IAM solutions, Secure web gateways, Zero Trust network access. 
**Software-defined networking (SDN)**- abstracts physical network devices into software and puts them in 3 planes. since this is software it can be easily configured/reprogrammed for flexibility.
	Data plane : Handles the actual switching and routing of traffic and imposition of access control lists (ACLs) for security.
    Control plane : Makes decisions about how traffic should be prioritized and secured, and where it should be switched.
    Management plane: Monitors traffic conditions and network status.
### 1.1.5
**Identity and access management:** RBAC: admin role, etc. Attribute-Based Access Control (ABAC): each resource is assigned a set of attributes. 
Mandatory access control (MAC): has classification levels: Top Secret, Secret, etc. is implemented and managed by an admin. is a hierarchical system
Discretionary Access Control (DAC): the file/resource owners have control over it. Linux systems. 
**Multifactor authentication (MFA)**- Two or more factors to AuthN. the two factors should be different
Something you know, Something you have, Something you are
2-Step Verification- generates a software token on a server and sends it to a resource assumed to be safely controlled by the user. (Basically a code sent to your phone or email)
**Single sign-on (SSO)**- Doesnt use its own database, uses third party DB like how Federation works 
**Federation**- Third party AuthN. 
Identity provider (IDP) authenticates users. & Service provider (SP) is the site or app that needs to authenticate users and trusts the IDP for this authentication.
IDP is Google and SP is the sign in website. 
Assertion is the message that goes back and forth between the IDP and SP Assertions are digitaly signed
Federations protocols usually use SAML. 
Shibboleth is a SAML based Federation. 
Transitive Trust Model- A trusts B & B trusts C then A trusts C 
**Privileged access management (PAM)**- PAM solutions audits everything Privileged users do. Ensures credentials are being used in an appropriate way. 
**Passwordless**- Uses another Factor of AuthN instead of a password
**Cloud access security broker (CASB)**- Management software designed to mediate access to cloud services by users across all types of devices. Does SSO, Scans Malware, Logs user activity, Controls Access
CASB Implementations- Forward proxy, Reverse proxy, or API 
### 1.1.6
**Encryption:** Basics like sym vs asym & hashing to digitally signing
**Public key infrastructure (PKI)**- tools designed to support public and private key management. checks via digital signatures, non-repudiation, centralize digital certificates and cryptographic services
Remember Certificate authority (CA) and issuance of Digital Certs, OSCP, CRL, etc. 
**Secure sockets layer (SSL) inspection**- process of inspecting encrypted HTTPS traffic for threats. Verifies website certificates are valid, detects On-path attacks. Enforcing Policies like AUP. 
Done via installing digital certificates on end devices that allow encrypted traffic to be intercepted, decrypted, and inspected by security tools 
### 1.1.7 
**Sensitive data protection**: 
**Data loss prevention (DLP)**- Systems that data is not viewed or transferred without a proper authorization
    Policy Server —To configure classification, confidentiality, privacy rules and policies, and to log incidents and compile reports.
    Endpoint Agents —To enforce policy on client computers, even when they are not connected to the network.
    Network Agents—To scan communications at network borders and interface with web and messaging servers to enforce policy.

| Mechanism  | Description                                                                                                                                                                                               |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Alert only | The copying is allowed, but the management system records an incident and may alert an administrator.                                                                                                     |
| Block      | The user is prevented from copying the original file but retains access to it. The user may or may not be alerted to the policy violation, but it will be logged as an incident by the management engine. |
| Quarantine | Access to the original file is denied to the user (or possibly any user). This might be accomplished by encrypting the file in place or by moving it to a quarantine area in the file system.             |
| Tombstone  | The original file is quarantined and replaced with one describing the policy violation and how the user can release it again.                                                                             |

**Personally identifiable information (PII)**- Data that can be used to directly or indirectly identify an individual. SSN, fin and medical records, etc. 
**Cardholder data (CHD)**- Data that is information related to the owner of a payment card, such as a credit or debit card. Important for PCIDSS

